"use strict";(()=>{var e={};e.id=888,e.ids=[888],e.modules={402:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(997),r=a(689);let l=function(){return n.jsx("header",{className:"bg-green-500 text-white p-4 text-center",children:n.jsx("h1",{children:"Plant Watering Reminder"})})};var o=a(168);let i=function({plant:e,onWaterPlant:t,onEditPlant:a}){function r(e){let t=new Date(e.split("T")[0]+"T00:00:00");return(0,o.WU)(t,"do MMMM")}return(0,n.jsxs)("div",{className:"border p-4",children:[n.jsx("h3",{children:e.name}),(0,n.jsxs)("p",{children:["Location: ",e.location]}),(0,n.jsxs)("p",{children:["Water every ",e.wateringFrequency," days"]}),(0,n.jsxs)("p",{children:["Last watered: ",e.lastWateredDate?r(e.lastWateredDate):"Not available"]}),(0,n.jsxs)("p",{children:["Next watered: ",e.nextWaterDate?r(e.nextWaterDate):"Not available"]}),n.jsx("button",{className:"bg-blue-500 text-white p-2",onClick:a,children:"Edit"}),n.jsx("button",{className:"bg-blue-500 text-white p-2",onClick:t,children:"Water Now"})]})},s=function({plant:e,onClose:t,onDelete:a}){return n.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1050,display:"flex",justifyContent:"center",alignItems:"center"},className:"modal-overlay",children:n.jsx("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},className:"modal-content",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:["Are you sure you want to delete ",e.name,"?"]}),n.jsx("button",{onClick:function(){a(e._id),t()},children:"Delete Plant"}),n.jsx("button",{onClick:t,children:"Cancel"})]})})})},d=function({plant:e,onClose:t,onSave:a,onDelete:l}){let[o,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,p]=(0,r.useState)({name:e.name,location:e.location,wateringFrequency:e.wateringFrequency,lastWateredDate:e.lastWateredDate,nextWaterDate:e.nextWaterDate}),h=e=>{p({...u,[e.target.name]:e.target.value})},x=e=>{c(e),i(!0)};return(0,n.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center"},className:"modal-overlay",onClick:function(e){"modal-overlay"===e.target.className&&t()},children:[n.jsx("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},className:"modal-content",onClick:e=>e.stopPropagation(),children:n.jsx("div",{className:"modal",children:(0,n.jsxs)("form",{onSubmit:t=>{t.preventDefault(),a(e._id,u)},children:[n.jsx("label",{children:"Name:"}),n.jsx("input",{type:"text",name:"name",value:u.name,onChange:h}),n.jsx("label",{children:"Location:"}),n.jsx("input",{type:"text",name:"location",value:u.location,onChange:h}),n.jsx("label",{children:"Last Watered Date:"}),n.jsx("input",{type:"date",name:"lastWateredDate",value:u.lastWateredDate,onChange:h}),n.jsx("label",{children:"Watering Frequency (days):"}),n.jsx("input",{type:"number",name:"wateringFrequency",value:u.wateringFrequency,onChange:h}),n.jsx("button",{type:"submit",children:"Save"}),n.jsx("button",{type:"button",onClick:()=>x(e),children:"Delete Plant"}),n.jsx("button",{onClick:t,children:"Close"})]})})}),o&&d&&n.jsx(s,{plant:d,onClose:()=>i(!1),onDelete:e=>{l(e),i(!1),t()}})]})},c=function({plants:e,updatePlantWateringDate:t,updatePlant:a,deletePlant:l}){let[o,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),p=e=>{u(e),s(!0)};return(0,n.jsxs)("div",{children:[e.sort((e,t)=>new Date(e.nextWaterDate)-new Date(t.nextWaterDate)).map(e=>n.jsx(i,{plant:e,onWaterPlant:()=>{let a=new Date,n=new Date;n.setDate(new Date().getDate()),a.setDate(new Date().getDate()+e.wateringFrequency),console.log({lastWateredDate:n.toISOString(),nextWaterDate:a.toISOString()}),t(e._id,{lastWateredDate:n.toISOString(),nextWaterDate:a.toISOString()})},onEditPlant:()=>p(e)},e._id)),o&&c&&n.jsx(d,{plant:c,onClose:()=>s(!1),onSave:(e,t)=>{a(e,t),s(!1)},onDelete:e=>{l(e)}})]})},u=function({addPlant:e}){let[t,a]=(0,r.useState)({name:"",location:"",lastWateredDate:"",wateringFrequency:"",wateringAmount:"",photo:""}),l=e=>{a({...t,[e.target.name]:e.target.value})},o=(e,t)=>{let a=new Date(e);return a.setDate(a.getDate()+parseInt(t)),a.toISOString().split("T")[0]};return(0,n.jsxs)("form",{onSubmit:n=>{n.preventDefault();let r=o(t.lastWateredDate,t.wateringFrequency);e({...t,nextWaterDate:r}),a({name:"",location:"",lastWateredDate:"",wateringFrequency:"",wateringAmount:"",photo:""})},className:"p-4",children:[n.jsx("input",{type:"text",name:"name",value:t.name,onChange:l,placeholder:"Plant Name",required:!0}),n.jsx("input",{type:"text",name:"location",value:t.location,onChange:l,placeholder:"Location",required:!0}),n.jsx("input",{type:"date",name:"lastWateredDate",value:t.lastWateredDate,onChange:l,placeholder:"Last Watered Date",required:!0}),n.jsx("input",{type:"number",min:"1",name:"wateringFrequency",value:t.wateringFrequency,onChange:l,placeholder:"Watering Frequency (days)",required:!0}),n.jsx("input",{type:"number",min:"1",name:"wateringAmount",value:t.wateringAmount,onChange:l,placeholder:"Water Amount (ml)",required:!0}),n.jsx("input",{type:"text",name:"photo",value:t.photo,onChange:l,placeholder:"Photo URL",required:!0}),n.jsx("button",{type:"submit",className:"bg-green-500 text-white p-2 mt-2",children:"Add Plant"})]})},p=function(){let[e,t]=(0,r.useState)([]);return(0,n.jsxs)("div",{children:[n.jsx(l,{}),n.jsx(u,{addPlant:e=>{fetch("http://localhost:5000/api/plants",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{t(t=>[...t,e]),console.log("Plant added:",e)}).catch(e=>{console.error("Error adding plant:",e)})}}),n.jsx(c,{plants:e,updatePlantWateringDate:(e,a)=>{console.log(e,a),fetch(`http://localhost:5000/api/plants/${e}/water`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(e=>e.json()).then(a=>{t(t=>t.map(t=>t._id===e?a:t))}).catch(e=>console.error("Failed to update plant:",e))},updatePlant:(e,a)=>{fetch(`http://localhost:5000/api/plants/${e}/edit`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(e=>{if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return e.json()}).then(a=>{t(t=>t.map(t=>t._id===e?a:t))}).catch(e=>{console.error("Failed to update plant:",e)})},deletePlant:function(e){fetch(`http://localhost:5000/api/plants/${e}`,{method:"DELETE"}).then(e=>{if(!e.ok)throw Error("Failed to delete the plant");return e.json()}).then(a=>{console.log(a.message),t(t=>t.filter(t=>t._id!==e))}).catch(e=>{console.error("Error deleting plant:",e)})}})]})}},689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[168],()=>a(402));module.exports=n})();